{% extends 'base.html' %}

{% block content %}

    <div class='container'>

        <div class='row-fluid'>
            <div class='home-carosel-container'>
                <div class='span7'>
                    <div class='hero-unit no-background'>
                        <h1>Test Socket.IO</h1>
                    </div>
                </div>
                <div class='span5'>
                    <div class='main-icon'>
                    </div>
                </div>
            </div>
        </div>
        <div class='row-fluid'>
            <div class='home-three-panel-container'>
                <div class='span4'>
                    <div class='well'>
                        <h3>
                            Player Information
                        </h3>
                        <hr>
                        <p><b>Name:</b> {{ user.name }}</p>
                        <p><b>Email:</b> {{ user.email }}</p>
                        <p>
                            <img src="{{ user.photo_link }}" />
                        </p>
                    </div>
                </div>
                <div class='span4'>
                    <div class='well'>
                        <h3>
                            Game Information
                        </h3>
                        <hr>
                        <p>
                            {{ players }} are currently waiting to buzz.
                        </p>
                    </div>
                </div>
                <div class='span4'>
                    <div class='well'>
                        <h3>
                            Buzz!
                        </h3>
                        <hr>
                        <p>
                            <a id="buzz-in" href="#" class="btn btn-primary">Buzz In</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </div>

{% endblock %}


{% block script %}

    <script>
    $(document).ready(function(){

        var socket = io.connect();
        var username = '{{ user.email }}';
        var player_name = '{{ user.name }}';
        var photo_link = '{{ user.photo_link }}';

        $("#buzz-in").click(function(){
            socket.emit('buzz', JSON.stringify({username: username, photo_link: photo_link, player_name: player_name}));
        });

        socket.on('buzzing_enabled', function(msg){
            console.log("buzzing enabled");
        });

        socket.on('player_buzz', function(username){
            console.log(username + " buzzed");
        });

    });

    </script>

{% endblock %}